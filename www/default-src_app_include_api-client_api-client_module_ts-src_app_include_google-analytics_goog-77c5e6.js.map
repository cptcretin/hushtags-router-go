{"version":3,"sources":["./src/app/include/api-client/api-client.module.ts","./src/app/include/google-analytics/google-analytics.service.ts","./src/app/include/location/location.service.ts"],"names":[],"mappings":"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","file":"default-src_app_include_api-client_api-client_module_ts-src_app_include_google-analytics_goog-77c5e6.js","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { ApiSettings } from '../app-settings/app-settings.module';\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t],\n})\nexport class ApiClientModule {\n\tprivate _host: string;\n\tprivate _apiVer: string;\n\tprivate _clientKey: string;\n\tprivate _clientSecret: string;\n\n\tconstructor(private http: HttpClient) {\n\t\tthis._host = ApiSettings.host;\n\t\tthis._apiVer = ApiSettings.apiVer;\n\t}\n\n\tget<T>(req:ApiRequest | string): Observable<T> {\n\t\treturn Observable.create(o => {\n\t\t\tlet uri = '';\n\t\t\tlet headers: HttpHeaders = undefined;\n\n\t\t\tif (typeof req === 'string') {\n\t\t\t\turi = this._uri(String(req));\n\t\t\t} else {\n\t\t\t\tlet r = req as ApiRequest;\n\n\t\t\t\turi = this._uri(r.path);\n\t\t\t\theaders = this._headers(r.headers);\n\t\t\t}\n\n\t\t\tthis.http\n\t\t\t\t.get<ApiResponse<T>>(uri, {headers: headers})\n\t\t\t\t.subscribe(\n\t\t\t\t\t(resp) => {\n\t\t\t\t\t\tif (!resp || !resp.response) {\n\t\t\t\t\t\t\to.error(new Error(\"Null response\"));\n\t\t\t\t\t\t} else if (resp.response.status >= 300) {\n\t\t\t\t\t\t\to.error(resp.response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.next(resp.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terr => {\n\t\t\t\t\t\tif (err.error && err.error.response) {\n\t\t\t\t\t\t\to.error(err.error.response)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.error(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => o.complete()\n\t\t\t\t);\n\t\t});\n\t}\n\n\tpost<T>(req: ApiRequest | string, body?: any): Observable<T> {\n\t\treturn Observable.create(o => {\n\t\t\tlet uri = '';\n\t\t\tlet headers: HttpHeaders = undefined;\n\n\t\t\tif (typeof req === 'string') {\n\t\t\t\turi = this._uri(String(req));\n\t\t\t} else {\n\t\t\t\tlet r = req as ApiRequest;\n\n\t\t\t\turi = this._uri(r.path);\n\t\t\t\theaders = this._headers(r.headers);\n\t\t\t}\n\n\t\t\tthis.http\n\t\t\t\t.post<ApiResponse<T>>(uri, body, {headers: headers})\n\t\t\t\t.subscribe(\n\t\t\t\t\t(resp) => {\n\t\t\t\t\t\tif (!resp || !resp.response) {\n\t\t\t\t\t\t\to.error(new Error(\"Null response\"));\n\t\t\t\t\t\t} else if (resp.response.status >= 300) {\n\t\t\t\t\t\t\to.error(resp.response.statusMessage);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.next(resp.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terr => {\n\t\t\t\t\t\tif (err.error && err.error.response) {\n\t\t\t\t\t\t\to.error(err.error.response)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.error(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => o.complete()\n\t\t\t\t);\n\t\t});\n\t}\n\n\tpostFile<T>(req:ApiRequest, body?:any): Observable<T> {\n\t\treturn Observable.create(o => {\n\t\t\tlet form: FormData = new FormData();\n\n\t\t\tfor (let prop in body) {\n\t\t\t\tform.append(prop, body[prop]);\n\t\t\t}\n\n\t\t\tthis.http.post<ApiResponse<T>>(this._uri(req.path), form, {headers: this._headers(req.headers)})\n\t\t\t\t.subscribe(\n\t\t\t\t\t(resp) => {\n\t\t\t\t\t\tif (!resp || !resp.response) {\n\t\t\t\t\t\t\to.error(new Error(\"Null response\"));\n\t\t\t\t\t\t} else if (resp.response.status >= 300) {\n\t\t\t\t\t\t\to.error(resp.response.statusMessage);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.next(resp.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terr => {\n\t\t\t\t\t\tif (err.error && err.error.response) {\n\t\t\t\t\t\t\to.error(err.error.response)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.error(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => o.complete()\n\t\t\t\t);\n\t\t});\n\t}\n\n\tput<T>(req:ApiRequest | string, body?:any): Observable<T> {\n\t\treturn Observable.create(o => {\n\t\t\tlet uri = '';\n\t\t\tlet headers: HttpHeaders = undefined;\n\n\t\t\tif (typeof req === 'string') {\n\t\t\t\turi = this._uri(String(req));\n\t\t\t} else {\n\t\t\t\tlet r = req as ApiRequest;\n\n\t\t\t\turi = this._uri(r.path);\n\t\t\t\theaders = this._headers(r.headers);\n\t\t\t}\n\n\t\t\tthis.http\n\t\t\t\t.put<ApiResponse<T>>(uri, body, {headers: headers})\n\t\t\t\t.subscribe(\n\t\t\t\t\t(resp) => {\n\t\t\t\t\t\tif (!resp || !resp.response) {\n\t\t\t\t\t\t\to.error(new Error(\"Null response\"));\n\t\t\t\t\t\t} else if (resp.response.status >= 300) {\n\t\t\t\t\t\t\to.error(resp.response.statusMessage);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.next(resp.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terr => {\n\t\t\t\t\t\tif (err.error && err.error.response) {\n\t\t\t\t\t\t\to.error(err.error.response)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.error(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => o.complete()\n\t\t\t\t);\n\t\t});\n\t}\n\n\tdelete<T>(req:ApiRequest): Observable<T> {\n\t\treturn Observable.create(o => {\n\t\t\tthis.http\n\t\t\t\t.delete<ApiResponse<T>>(this._uri(req.path), {headers: this._headers(req.headers)})\n\t\t\t\t.subscribe(\n\t\t\t\t\t(resp) => {\n\t\t\t\t\t\tif (!resp || !resp.response) {\n\t\t\t\t\t\t\to.error(new Error(\"Null response\"));\n\t\t\t\t\t\t} else if (resp.response.status >= 300) {\n\t\t\t\t\t\t\to.error(resp.response.statusMessage);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.next(resp.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terr => {\n\t\t\t\t\t\tif (err.error && err.error.response) {\n\t\t\t\t\t\t\to.error(err.error.response)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\to.error(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => o.complete()\n\t\t\t\t);\n\t\t});\n\t}\n\n\tfileUrl(handle: string): string {\n\t\treturn this._uri(`/file/${handle}`);\n\t}\n\t\n\turl(path: string): string {\n\t\treturn this._uri(path);\n\t}\n\n\tprivate _uri(path: string): string {\n\t\treturn `${this._host}/bff/${this._apiVer}${path}`;\n\t}\n\n\tprivate _headers(headers: ApiHeader[]): HttpHeaders {\n\t\tif (typeof headers === \"undefined\") {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet httpHeaders: HttpHeaders = new HttpHeaders();\n\n\t\theaders.forEach( header => {\n\t\t\thttpHeaders = httpHeaders.set(header.name, header.value);\n\t\t});\n\n\t\treturn httpHeaders;\n\t}\n}\n\ninterface ApiStat {\n\tstatus: number,\n\tstatusMessage: string,\n\tresponseTime: number\n}\n\ninterface ApiResponse<T>  {\n\t(arg: T) : T;\n\n\tresponse: ApiStat\n\tdata: T\n}\n\ninterface Authentication {\n\ttoken: string\n}\n\nexport interface ApiHeader {\n\tname: string,\n\tvalue: string\n}\n\nexport class ApiRequest {\n\tpath: string;\n\theaders: ApiHeader[];\n\n\tconstructor(path: string) {\n\t\tthis.path = path;\n\t\tthis.headers = [];\n\t}\n\n\taddHeaders(headers: ApiHeader[]) {\n\t\tif (headers) {\n\t\t\theaders.forEach(x => this.headers.push(x));\n\t\t}\n\n\t\treturn this;\n\t}\n}\n\nexport const TagStatus = {\n\tActive: \"active\",\n\tReview: \"review\",\n\tSuspended: \"suspended\",\n\tArchived: \"archived\",\n\tUnassigned: \"unassigned\",\n\tHold: \"hold\",\n}\n\nexport interface TagModel {\n\thandle: string,\n\ttitle: string,\n\tdescription: string,\n\tstatus: string,\n\tspaceAvailable: number,\n\tlocked: boolean,\n\tfeatures: string[],\n\tcontents: ArchiveModel[],\n}\n\nexport interface ArchiveModel {\n\thandle: string,\n\ttitle: string,\n\tdescription: string,\n}\n\nexport interface ManifestModel {\n    manifest: {\n        items: ManifestItemModel[],\n    }\n\tauthor: ManifestAuthorModel,\n}\n\nexport interface ManifestItemModel {\n\tfileName: string,\n\ttitle: string,\n\tdescription: string,\n\tmime: string,\n\tsize: number,\n\tdefault?: boolean,\n}\n\nexport interface ManifestAuthorModel {\n    handle: string,\n    avatar: string,\n    pkey: string,\n}\n","import { Injectable } from '@angular/core';\n\nimport { AppLogService } from '../app-log/app-log.service';\nimport { GoogleAnalyticsSettings as gaSettings } from '../app-settings/app-settings.module';\n\ndeclare const ga;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class GoogleAnalyticsService {\n    constructor(\n        private log: AppLogService,\n    ) {}\n\n    pageView(page: string) {\n        if (this.enabled) {\n            try {\n                ga('set', 'page', page);\n            } catch (err) {\n                this.log.warn(\"error recording page\", page, err);\n            }\n        } else {\n            this.log.warn('GA not enabled');\n        }\n    }\n\n    private enabled = gaSettings.enabled;\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { Observable } from 'rxjs';\n\nimport { AppLogService } from '../app-log/app-log.service';\nimport { AppSettingsService, SettingKey, LocationSetting } from '../app-settings/app-settings.service';\nimport { Translations } from '../i18n/i18n.module';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class LocationService {\n    constructor(\n        private alert: AlertController,\n        private log: AppLogService,\n        private settings: AppSettingsService,\n        private translations: Translations,\n    ) {\n        this.translations.ready([\n            Translation.Alert_Permission_Title,\n            Translation.Alert_Permission_Message,\n            Translation.Button_Casual_Deny,\n        ]).then();\n    }\n\n    async getLocation(): Promise<GeoPoint> {\n        return new Promise( async (res, rej) => {\n            await this.translations.ready([]);\n\n            let pos = this.settings.get<GeoPoint>(SettingKey.location);\n            let prompt = this.settings.get<boolean>(SettingKey.locationPrompt) == undefined;\n\n            if (pos) {\n                res(pos);\n                return;\n            }\n\n            if (!window.navigator.geolocation || !prompt) {\n                rej(new Error('GPS not enabled'));\n                return;\n            }\n\n            let msg = await this.alert.create({\n                header: this.translations.get(Translation.Alert_Permission_Title),\n                message: this.translations.get(Translation.Alert_Permission_Message),\n                cssClass: 'alert-location-permission',\n                buttons: [\n                    { text: this.translations.get(Translation.Button_Casual_Deny), handler: () => {\n                        this.settings.set(SettingKey.locationPrompt, { value: false });\n                        msg.dismiss();\n                        rej(new Error('user declined GPS'));\n                    }\n                }],\n            });\n\n            let alertTimeout = setTimeout( async () => {\n                if (prompt) {\n                    await msg.present();\n                }\n            }, 5000);\n\n            window.navigator.geolocation.getCurrentPosition( pos => {\n                this.log.trace(\"got geo-location\", pos);\n\n                clearTimeout(alertTimeout);\n                msg.dismiss();\n\n                let point = {\n                    lat: pos.coords.latitude,\n                    lon: pos.coords.longitude,\n                };\n                let exp = new Date();\n\n                exp.setMinutes(exp.getMinutes() + 3);\n\n                this.settings.set(SettingKey.location, { value: point, expire: exp });\n                res(point);\n            }, err => {\n                this.log.warn(\"could not get position\", err);\n\n                clearTimeout(alertTimeout);\n                msg.dismiss();\n\n                if (err.code === 1) { // Denied GPS permisison\n                    this.settings.set(SettingKey.locationPrompt, { value: false });\n                }\n\n                rej(err);\n            });\n        });\n    }\n}\n\nexport interface GeoPoint {\n    lat: number\n    lon: number\n}\n\nconst Translation = {\n    Alert_Permission_Title: 'Service_Location.Alert_Permission_Title',\n    Alert_Permission_Message: 'Service_Location.Alert_Permission_Message',\n    Button_Casual_Deny: 'Common.Button_Casual_Deny',\n}"],"sourceRoot":"webpack:///"}